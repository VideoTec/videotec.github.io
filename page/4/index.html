<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="音视频、Android、C/C++">
<meta property="og:type" content="website">
<meta property="og:title" content="DeYi 技术博客">
<meta property="og:url" content="http://wangxiang.work/page/4/index.html">
<meta property="og:site_name" content="DeYi 技术博客">
<meta property="og:description" content="音视频、Android、C/C++">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DeYi 技术博客">
<meta name="twitter:description" content="音视频、Android、C/C++">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wangxiang.work/page/4/"/>





  <title>DeYi 技术博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DeYi 技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">总结&记录</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about-me/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/28/android/android studio/res/drawable/drawable-xml-selector/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/28/android/android studio/res/drawable/drawable-xml-selector/" itemprop="url">android drawable resource selector</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-28T11:55:50+08:00">
                2017-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/" itemprop="url" rel="index">
                    <span itemprop="name">android studio</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/res/" itemprop="url" rel="index">
                    <span itemprop="name">res</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/res/drawable/" itemprop="url" rel="index">
                    <span itemprop="name">drawable</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h4><p><a href="https://developer.android.com/guide/topics/resources/drawable-resource.html#StateList" target="_blank" rel="external">状态列表</a><br>此 XML 文件为不同状态引用不同位图图形（例如，按下按钮时使用不同的图像）。创建 StateListDrawable。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:constantSize=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">    android:dither=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">    android:variablePadding=[&quot;true&quot; | &quot;false&quot;] &gt;</div><div class="line">    &lt;item</div><div class="line">        android:drawable=&quot;@[package:]drawable/drawable_resource&quot;</div><div class="line">        android:state_pressed=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_focused=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_hovered=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_selected=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_checkable=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_checked=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_enabled=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_activated=[&quot;true&quot; | &quot;false&quot;]</div><div class="line">        android:state_window_focused=[&quot;true&quot; | &quot;false&quot;] /&gt;</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">    &lt;item android:state_pressed=&quot;true&quot;</div><div class="line">          android:drawable=&quot;@drawable/button_pressed&quot; /&gt; &lt;!-- pressed --&gt;</div><div class="line">    &lt;item android:state_focused=&quot;true&quot;</div><div class="line">          android:drawable=&quot;@drawable/button_focused&quot; /&gt; &lt;!-- focused --&gt;</div><div class="line">    &lt;item android:state_hovered=&quot;true&quot;</div><div class="line">          android:drawable=&quot;@drawable/button_focused&quot; /&gt; &lt;!-- hovered --&gt;</div><div class="line">    &lt;item android:drawable=&quot;@drawable/button_normal&quot; /&gt; &lt;!-- default --&gt;</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Button</div><div class="line">    android:layout_height=&quot;wrap_content&quot;</div><div class="line">    android:layout_width=&quot;wrap_content&quot;</div><div class="line">    android:background=&quot;@drawable/button&quot; /&gt;</div></pre></td></tr></table></figure>
<p><a href="https://stackoverflow.com/questions/7803430/how-to-change-background-image-of-button-when-clicked-focused" target="_blank" rel="external">change-background-image-of-button-when-clicked-focused</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">&lt;item android:state_focused=&quot;true&quot; android:drawable=&quot;@drawable/your_imagename_while_focused&quot;/&gt;</div><div class="line">&lt;item android:state_pressed=&quot;true&quot; android:drawable=&quot;@drawable/your_imagename_while_pressed&quot; /&gt;</div><div class="line">&lt;item android:drawable=&quot;@drawable/image_name_while_notpressed&quot; /&gt;  //means normal</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure></p>
<h4 id="警告"><a href="#警告" class="headerlink" title="警告"></a>警告</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">&lt;item android:drawable=&quot;@drawable/ic_fair_off&quot; /&gt;</div><div class="line">&lt;item android:state_pressed=&quot;true&quot; android:drawable=&quot;@drawable/ic_fair_off_selected&quot; /&gt;</div><div class="line">&lt;/selector&gt;</div></pre></td></tr></table></figure>
<p>This item is unreachable because a previous item (item #1) is a more general match than this one (Earlier item which masks item)</p>
<h4 id="对比-color-state-list"><a href="#对比-color-state-list" class="headerlink" title="对比 color-state-list"></a>对比 color-state-list</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/27/android/3rdParty/lansosdk/lansosdk-api-ImagePadMix-getBlendBitmap-花屏/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/android/3rdParty/lansosdk/lansosdk-api-ImagePadMix-getBlendBitmap-花屏/" itemprop="url">ImagePadMix getBlendBitmap 在一些机器上 输出的BMP是花的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T18:37:56+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/3rdParty/" itemprop="url" rel="index">
                    <span itemprop="name">3rdParty</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/3rdParty/lansosdk/" itemprop="url" rel="index">
                    <span itemprop="name">lansosdk</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="情景-截取视频的封面时添加上效果视频的截图"><a href="#情景-截取视频的封面时添加上效果视频的截图" class="headerlink" title="情景 截取视频的封面时添加上效果视频的截图"></a>情景 截取视频的封面时添加上效果视频的截图</h4><p>代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">mixBmp</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (requestPermission()) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    Bitmap mainJpg = BitmapFactory.decodeFile(<span class="string">"/sdcard/main.jpg"</span>);</div><div class="line">    Bitmap effectJpg = BitmapFactory.decodeFile(<span class="string">"/sdcard/effect.jpg"</span>);</div><div class="line">    ImagePadMix imagePadMix = <span class="keyword">new</span> ImagePadMix(<span class="keyword">this</span>);</div><div class="line">    <span class="keyword">if</span> (imagePadMix.prepare(mainJpg.getWidth(), mainJpg.getHeight())) &#123;</div><div class="line">        Bitmap resBmp = imagePadMix.getBlendBitmap(mainJpg, effectJpg);</div><div class="line">        imageView.setImageBitmap(resBmp);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            resBmp.compress(Bitmap.CompressFormat.JPEG, <span class="number">70</span>, <span class="keyword">new</span> FileOutputStream(<span class="string">"/sdcard/image-pad-mix.jpg"</span>));</div><div class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/image/lansosdk-api-imagepadmix-getblendbitmap-main.jpg" alt="main.jpg"><br><img src="/image/lansosdk-api-imagepadmix-getblendbitmap-effect.jpg" alt="effect.jpg"><br><img src="/image/lansosdk-api-imagepadmix-getblendbitmap-mix-result.jpg" alt="mix-result"></p>
<h4 id="出问题的手机列表"><a href="#出问题的手机列表" class="headerlink" title="出问题的手机列表"></a>出问题的手机列表</h4><ol>
<li>HMD Global Oy TA-1000</li>
<li>乐视 MAX</li>
</ol>
<h4 id="没有问题的手机列表"><a href="#没有问题的手机列表" class="headerlink" title="没有问题的手机列表"></a>没有问题的手机列表</h4><ol>
<li>Xiaomi Redmi Note 4</li>
<li>Meizu M1 E</li>
<li>OPPO A37m</li>
</ol>
<h4 id="真正的原因"><a href="#真正的原因" class="headerlink" title="真正的原因"></a>真正的原因</h4><p>1080 实际的图片高度是 1088<br>因为你发给我的图片, 高度不是32的倍数</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/27/ffmpeg/command-options/ffmpeg-f-images-截图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/ffmpeg/command-options/ffmpeg-f-images-截图/" itemprop="url">ffmpeg 截图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T18:22:19+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/ffmpeg/" itemprop="url" rel="index">
                    <span itemprop="name">ffmpeg</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://gist.github.com/ameizi/9d5572a25063790db5fb" target="_blank" rel="external">ffmpeg视频合并、格式转换、截图</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/27/android/android sdk/android.media.MediaPlayer/MediaPlayer.seekTo-error-Attempt to perform seekTo in wrong state/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/android/android sdk/android.media.MediaPlayer/MediaPlayer.seekTo-error-Attempt to perform seekTo in wrong state/" itemprop="url">Attempt to perform seekTo in wrong state</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T13:23:08+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-sdk/" itemprop="url" rel="index">
                    <span itemprop="name">android sdk</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-sdk/android-media-MediaPlayer/" itemprop="url" rel="index">
                    <span itemprop="name">android.media.MediaPlayer</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="出错情景"><a href="#出错情景" class="headerlink" title="出错情景"></a>出错情景</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mediaPlayer.setOnPreparedListener(<span class="keyword">new</span> MediaPlayer.OnPreparedListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPrepared</span><span class="params">(MediaPlayer mp)</span> </span>&#123;</div><div class="line">        mediaPlayer.pause();</div><div class="line">        mediaPlayer.seekTo(<span class="number">10</span> * <span class="number">1000</span>); <span class="comment">// 如果只调用 seek 可正常播放</span></div><div class="line">        mainThreadHandler.sendEmptyMessage(MSG_CODE_PLAYER_PREPARED);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">09-27 13:19:14.361 21032-21032/com.lansoeditor.demo E/MediaPlayer: pause called in state 8</div><div class="line">09-27 13:19:14.361 21032-21032/com.lansoeditor.demo E/MediaPlayer: error (-38, 0)</div><div class="line">09-27 13:19:14.361 21032-21032/com.lansoeditor.demo E/MediaPlayer: Attempt to perform seekTo in wrong state: mPlayer=0xdccaf300, mCurrentState=0</div><div class="line">09-27 13:19:14.361 21032-21032/com.lansoeditor.demo E/MediaPlayer: error (-38, 0)</div><div class="line">09-27 13:19:14.448 21032-21032/com.lansoeditor.demo E/MediaPlayer: Attempt to perform seekTo in wrong state: mPlayer=0xdccaf300, mCurrentState=0</div><div class="line">09-27 13:19:14.448 21032-21032/com.lansoeditor.demo E/MediaPlayer: error (-38, 0)</div><div class="line">09-27 13:19:14.450 21032-21032/com.lansoeditor.demo E/MediaPlayer: start called in state 0</div><div class="line">09-27 13:19:14.450 21032-21032/com.lansoeditor.demo E/MediaPlayer: error (-38, 0)</div><div class="line">09-27 13:19:14.451 21032-21032/com.lansoeditor.demo E/MediaPlayer: Error (-38,0)</div><div class="line">09-27 13:19:14.452 21032-21032/com.lansoeditor.demo E/MediaPlayer: Error (-38,0)</div><div class="line">09-27 13:19:14.467 21032-21032/com.lansoeditor.demo E/MediaPlayer: Error (-38,0)</div><div class="line">09-27 13:19:14.467 21032-21032/com.lansoeditor.demo E/MediaPlayer: Error (-38,0)</div></pre></td></tr></table></figure>
<blockquote>
<p>如果出现这个错误再调用 mediaPlayer.start() ，会立即产生 <code>MediaPlayer.OnCompletionListener</code> 结束事件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mplayer.setOnCompletionListener(new OnCompletionListener() &#123;</div><div class="line">    @Override</div><div class="line">    public void onCompletion(MediaPlayer mp) &#123;</div><div class="line">        if (mplayer != null &amp;&amp; mplayer.isPlaying()) &#123; 防止死循环</div><div class="line">            rePlay();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://stackoverflow.com/questions/15898089/android-mediaplyer-seekto-inside-onprepared" target="_blank" rel="external">android-mediaplyer-seekto-inside-onprepared</a><br><a href="https://stackoverflow.com/questions/11733810/mediaplayer-error-38-0" target="_blank" rel="external">MediaPlayer error (-38, 0)</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/27/android/android studio/res/string/android-res-string-Formatting and Styling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/android/android studio/res/string/android-res-string-Formatting and Styling/" itemprop="url">Android 字符串资源 Formatting and Styling</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T11:48:26+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/" itemprop="url" rel="index">
                    <span itemprop="name">android studio</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/res/" itemprop="url" rel="index">
                    <span itemprop="name">res</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/android-studio/res/string/" itemprop="url" rel="index">
                    <span itemprop="name">string</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h4><p><a href="https://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling" target="_blank" rel="external">Formatting and Styling</a></p>
<h4 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;string name=&quot;good_example&quot;&gt;This\&apos;ll work&lt;/string&gt;</div><div class="line">&lt;string name=&quot;good_example_2&quot;&gt;&quot;This&apos;ll also work&quot;&lt;/string&gt;</div><div class="line">&lt;string name=&quot;bad_example&quot;&gt;This doesn&apos;t work&lt;/string&gt;</div><div class="line">    &lt;!-- Causes a compile error --&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;string name=&quot;good_example&quot;&gt;This is a \&quot;good string\&quot;.&lt;/string&gt;</div><div class="line">&lt;string name=&quot;bad_example&quot;&gt;This is a &quot;bad string&quot;.&lt;/string&gt;</div><div class="line">    &lt;!-- Quotes are stripped; displays as: This is a bad string. --&gt;</div><div class="line">&lt;string name=&quot;bad_example_2&quot;&gt;&apos;This is another &quot;bad string&quot;.&apos;&lt;/string&gt;</div><div class="line">    &lt;!-- Causes a compile error --&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;string name=&quot;welcome_messages&quot;&gt;Hello, %1$s! You have %2$d new messages.&lt;/string&gt;</div><div class="line"></div><div class="line">Resources res = getResources();</div><div class="line">String text = res.getString(R.string.welcome_messages, username, mailCount);</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/27/android/3rdParty/lansosdk/lansosdk-api-TwoVideoLayer-error-rotate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/android/3rdParty/lansosdk/lansosdk-api-TwoVideoLayer-error-rotate/" itemprop="url">主视频旋转 90 度后 附加视频方向不一致了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T10:29:21+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/3rdParty/" itemprop="url" rel="index">
                    <span itemprop="name">3rdParty</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/3rdParty/lansosdk/" itemprop="url" rel="index">
                    <span itemprop="name">lansosdk</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="情景"><a href="#情景" class="headerlink" title="情景"></a>情景</h4><p>主视频： 1920x1080 rotation 90度<br>附加视频: 540x960 rotation 0度</p>
<ol>
<li>使用 MediaPlayer + DrawPadView 实现播放，</li>
<li>使用 TwoVideoLayer 实现同时播放主视频和附加视频<br><code>drawPadView.addTwoVideoLayer(mediaPlayer.getVideoWidth(), mediaPlayer.getVideoHeight());</code></li>
</ol>
<p>结果如下图：<br><img src="/image/lansosdk-api-TwoVideoLayer-error-rotate.png" alt="TwoVideoLayer-error-rotate"></p>
<blockquote>
<p>附加视频（蝴蝶）横着播放了</p>
</blockquote>
<h4 id="暂时修改方法"><a href="#暂时修改方法" class="headerlink" title="暂时修改方法"></a>暂时修改方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEffect</span><span class="params">(String effectPath)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (effectPlayer == <span class="keyword">null</span>) &#123;</div><div class="line">        effectPlayer = <span class="keyword">new</span> MediaPlayer();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        effectPlayer.stop();</div><div class="line">        effectPlayer.reset();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        effectPlayer.setDataSource(effectPath);</div><div class="line">        twoVideoLayer.setDisplayTexture2(<span class="keyword">true</span>);</div><div class="line">        <span class="comment">//当前没有完全解决, 只是时间关系, 规避了一下, 可以通过这样来矫正下角度</span></div><div class="line">        <span class="comment">//更新了 D:\work\lanso.demo\app\libs\lansongeditor_hx.jar</span></div><div class="line">        <span class="keyword">if</span> (mainVideoInfo.vRotateAngle == <span class="number">90</span>) &#123;</div><div class="line">            twoVideoLayer.setSecondVideoMirror(Rotation.ROTATION_270, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mainVideoInfo.vRotateAngle == <span class="number">270</span>) &#123;</div><div class="line">            twoVideoLayer.setSecondVideoMirror(Rotation.ROTATION_90, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line">        &#125;</div><div class="line">        effectPlayer.setSurface(<span class="keyword">new</span> Surface(twoVideoLayer.getVideoTexture2()));</div><div class="line">        effectPlayer.prepare();</div><div class="line">        effectPlayer.start();</div><div class="line"></div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        Log.e(TAG, <span class="string">"播放特效失败"</span>, e);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/26/website/HEXO/hexo-install-and-command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/26/website/HEXO/hexo-install-and-command/" itemprop="url">HEXO 安装、命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-26T00:02:01+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网站/" itemprop="url" rel="index">
                    <span itemprop="name">网站</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网站/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><ol>
<li>下载安装 nodejs<br><a href="https://nodejs.org/en/" target="_blank" rel="external">下载地址</a></li>
<li>创建一个文件夹，hexo.site，用于存放网站代码</li>
<li>安装 hexo 相关的 npm 包<br>在命令行中，CD到 hexo.site 文件夹，执行下面的安装命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">npm install hexo --save</div><div class="line">npm install hexo-cli --save</div><div class="line">npm install hexo-server --save</div><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p><code>npm install hexo -g</code> 在 c: 下安装后，到 d: 运行时，找不到命令 hexo</p>
</blockquote>
<h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><ol>
<li><p>hexo d 发布时，把 hexo.site 文件夹发布到网站了<br>解决办法：删除 hexo.site/.deploy_git 目录，重新发布。</p>
</li>
<li><p>hexo.site/.deploy_git 换电脑后，会重新生成，并强制推送到网站<br>解决办法：把这个目录，加入到 hexo.site 仓库的子模块<br><a href="../../../../25/工程管理/git/git-cmd-submodule/">参考 git submodule add</a></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/25/tools/vcs/git/git-cmd-submodule/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/25/tools/vcs/git/git-cmd-submodule/" itemprop="url">git submodule</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T23:00:30+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工程管理/" itemprop="url" rel="index">
                    <span itemprop="name">工程管理</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工程管理/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>子模块允许你将一个 Git 仓库作为另一个 Git 仓库的子目录。<br>它能让你将另一个仓库克隆到自己的项目中，同时还保持提交的独立</p>
<h4 id="帮助文档"><a href="#帮助文档" class="headerlink" title="帮助文档"></a>帮助文档</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">usage: git submodule [--quiet] add [-b &lt;branch&gt;] [-f|--force] [--name &lt;name&gt;] [--reference &lt;repository&gt;] [--] &lt;repository&gt; [&lt;path&gt;]</div><div class="line">   or: git submodule [--quiet] status [--cached] [--recursive] [--] [&lt;path&gt;...]</div><div class="line">   or: git submodule [--quiet] init [--] [&lt;path&gt;...]</div><div class="line">   or: git submodule [--quiet] deinit [-f|--force] (--all| [--] &lt;path&gt;...)</div><div class="line">   or: git submodule [--quiet] update [--init] [--remote] [-N|--no-fetch] [-f|--force] [--checkout|--merge|--rebase] [--[no-]recommend-shallow] [--reference &lt;repository&gt;] [--recursive] [--] [&lt;path&gt;...]</div><div class="line">   or: git submodule [--quiet] summary [--cached|--files] [--summary-limit &lt;n&gt;] [commit] [--] [&lt;path&gt;...]</div><div class="line">   or: git submodule [--quiet] foreach [--recursive] &lt;command&gt;</div><div class="line">   or: git submodule [--quiet] sync [--recursive] [--] [&lt;path&gt;...]</div><div class="line">   or: git submodule [--quiet] absorbgitdirs [--] [&lt;path&gt;...]</div></pre></td></tr></table></figure>
<h4 id="创建的配置文件"><a href="#创建的配置文件" class="headerlink" title="创建的配置文件"></a>创建的配置文件</h4><ul>
<li>.gitmodules<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[submodule &quot;themes/next&quot;]</div><div class="line">	path = themes/next</div><div class="line">	url = git@github.com:VideoTec/hexo-theme-next.git</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>子模块文件夹 虽然是工作目录中的一个子目录，但 Git 还是会将它视作一个子模块。<br>  当你不在那个目录中时，Git 并不会跟踪它的内容， 而是将它看作该仓库中的<strong><em>一个特殊提交</em></strong>。</p>
</blockquote>
<h4 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h4><p><a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="external">Git 工具 - 子模块</a></p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><ul>
<li><p>增加子模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git submodule add https://github.com/chaconinc/DbConnector</div><div class="line">git submodule add https://github.com/iissnan/hexo-theme-next themes/next</div></pre></td></tr></table></figure>
</li>
<li><p>删除子模块<br><a href="https://stackoverflow.com/questions/29850029/what-is-the-current-way-to-remove-a-git-submodule" target="_blank" rel="external">way-to-remove-a-git-submodule</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git submodule deinit &lt;asubmodule&gt;    </div><div class="line">git rm &lt;asubmodule&gt;</div><div class="line"># Note: asubmodule (no trailing slash)</div><div class="line"># or, if you want to leave it in your working tree</div><div class="line">git rm --cached &lt;asubmodule&gt;</div><div class="line">rm -rf .git/modules/&lt;asubmodule&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>克隆仓库后，第一次拉取子模块的，需要初始化<br><code>git submodule init</code></p>
</li>
<li>列出所有子模块<br><code>git submodule status</code></li>
<li>拉取子模块<br><code>git submodule update</code></li>
</ul>
<blockquote>
<p>拉取子模块时的错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; $ git submodule update .deploy_git</div><div class="line">&gt; Fetched in submodule path &apos;.deploy_git&apos;, but it did not contain d0146b46d71549946f37804f694af92b9db0a9e7. Direct fetching of that commit failed.</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
<p>解决办法，cd，到子模块目录，使用 git status 查看状态，进行处理。</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/25/android/exception/java.lang.IllegalStateException-MediaPlayer.setDataSource/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/25/android/exception/java.lang.IllegalStateException-MediaPlayer.setDataSource/" itemprop="url">java.lang.IllegalStateException MediaPlayer setDataSource</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T19:49:44+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/exception/" itemprop="url" rel="index">
                    <span itemprop="name">exception</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEffect</span><span class="params">(String effectPath)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (effectPlayer == <span class="keyword">null</span>) &#123;</div><div class="line">        effectPlayer = <span class="keyword">new</span> MediaPlayer();</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        effectPlayer.stop(); <span class="comment">//问题出在这里，stop 进入 stopped 状态，需要再调用 reset 才能进入 Idle 状态</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        effectPlayer.setDataSource(effectPath);</div><div class="line">        twoVideoLayer.setDisplayTexture2(<span class="keyword">true</span>);</div><div class="line">        effectPlayer.setSurface(<span class="keyword">new</span> Surface(twoVideoLayer.getVideoTexture2()));</div><div class="line">        effectPlayer.prepare();</div><div class="line">        effectPlayer.start();</div><div class="line"></div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        Log.e(TAG, <span class="string">"播放特效失败"</span>, e);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>异常信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">java.lang.IllegalStateException</div><div class="line">   at android.media.MediaPlayer._setDataSource(Native Method)</div><div class="line">   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1154)</div><div class="line">   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1139)</div><div class="line">   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1118)</div><div class="line">   at android.media.MediaPlayer.setDataSource(MediaPlayer.java:1067)</div><div class="line">   at com.lansosdk.videoeditor.LansoPlayer.addEffect(LansoPlayer.java:88)</div><div class="line">   at work.wangxiang.lansodemo.PlayerActivity.onEffect(PlayerActivity.java:50)</div><div class="line">   at java.lang.reflect.Method.invoke(Native Method)</div></pre></td></tr></table></figure></p>
<p>Idle 状态下，才可调用 setDataSource 方法。<br>调用 reset，才会进入 Idle 状态。<br><img src="/image/mediaplayer_state_diagram.gif" alt="mediaplayer status machine"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wangxiang.work/2017/09/25/android/exception/java.lang.IllegalStateException-setSupportActionBar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DeYi 技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/25/android/exception/java.lang.IllegalStateException-setSupportActionBar/" itemprop="url">java.lang.IllegalStateException setSupportActionBar</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-25T16:51:37+08:00">
                2017-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/编程/android/exception/" itemprop="url" rel="index">
                    <span itemprop="name">exception</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">protected void onCreate(Bundle savedInstanceState) &#123;</div><div class="line">    super.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_player);</div><div class="line">    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">    setSupportActionBar(toolbar);</div></pre></td></tr></table></figure></p>
<p>异常信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Caused by: java.lang.IllegalStateException: This Activity already has an action bar supplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set windowActionBar to false in your theme to use a Toolbar instead.</div><div class="line">     at android.support.v7.app.AppCompatDelegateImplV9.setSupportActionBar(AppCompatDelegateImplV9.java:204)</div><div class="line">     at android.support.v7.app.AppCompatActivity.setSupportActionBar(AppCompatActivity.java:129)</div><div class="line">     at work.wangxiang.lansodemo.PlayerActivity.onCreate(PlayerActivity.java:20)</div><div class="line">     at android.app.Activity.performCreate(Activity.java:6288)</div><div class="line">     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1113)</div></pre></td></tr></table></figure></p>
<p>清单文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">    android:name=&quot;.PlayerActivity&quot;</div><div class="line">    android:label=&quot;@string/title_activity_player&quot;</div><div class="line">    android:theme=&quot;@style/AppTheme&quot;&gt;</div><div class="line">&lt;/activity&gt;</div></pre></td></tr></table></figure></p>
<p>样式代码 <code>@style/AppTheme</code><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;</div><div class="line">    &lt;!-- Customize your theme here. --&gt;</div><div class="line">    &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p>解决方法，修改成下面的样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppTheme.NoActionBar&quot; parent=&quot;Theme.AppCompat&quot;&gt;</div><div class="line">    &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <p class="site-author-name" itemprop="name">wxiang</p>
            <p class="site-description motion-element" itemprop="description">音视频、Android、C/C++</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">50</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">42</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wxiang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
